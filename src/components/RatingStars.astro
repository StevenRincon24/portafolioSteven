---
// RatingStars.astro
export interface Props {
  rating: number;
  maxRating?: number;
}

const { rating, maxRating = 5 } = Astro.props;
const fullStars = Math.floor(rating);
const halfStars = rating % 1 !== 0;
---

<div class="flex">
  {
    Array.from({ length: fullStars }).map(() => (
      <svg class="w-5 h-5 text-green-500 fill-current" viewBox="0 0 24 24">
        <path d="M12 .587l3.668 7.428 8.212 1.196-5.94 5.78 1.402 8.168L12 18.902l-7.342 3.857 1.402-8.168-5.94-5.78 8.212-1.196z" />
      </svg>
    ))
  }
  {
    halfStars && (
      <svg class="w-5 h-5 text-green-500 fill-current" viewBox="0 0 24 24">
        <path
          d="M12 .587l3.668 7.428 8.212 1.196-5.94 5.78 1.402 8.168L12 18.902l-7.342 3.857 1.402-8.168-5.94-5.78 8.212-1.196z"
          fill="currentColor"
        />
        <rect width="50%" height="100%" fill="#333" />
      </svg>
    )
  }
  {
    Array.from({ length: maxRating - fullStars - (halfStars ? 1 : 0) }).map(
      () => (
        <svg class="w-5 h-5 text-gray-400 fill-current" viewBox="0 0 24 24">
          <path d="M12 .587l3.668 7.428 8.212 1.196-5.94 5.78 1.402 8.168L12 18.902l-7.342 3.857 1.402-8.168-5.94-5.78 8.212-1.196z" />
        </svg>
      )
    )
  }
</div>
